(this.webpackJsonpfor_dev=this.webpackJsonpfor_dev||[]).push([[0],{41:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(17),c=n.n(a),o=n(4),u=n.n(o),s=n(6),i=n(8),l=n(3),j=n(2),p=function(t){var e=t.note,n=t.toggleImportance,a=e.important?"make unimportant":"make important";return Object(r.jsxs)("li",{className:"note",children:[e.content,Object(r.jsx)("button",{onClick:n,children:a})]})},b=function(t){var e=t.message;return null===e?null:Object(r.jsx)("div",{className:"error",children:e})},f=n(5),d=n.n(f),O="/api/notes",h=null,m=function(){return d.a.get(O).then((function(t){return t.data}))},v=function(t){var e={headers:{Authorization:h}};return d.a.post(O,t,e).then((function(t){return t.data}))},g=function(t,e){var n=d.a.put("".concat(O,"/").concat(t),e);return console.log(n),n.then((function(t){return t.data}))},x=function(t){h="bearer ".concat(t)},w={login:function(){var t=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/api/login",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=(n(41),function(){var t=Object(j.useState)([]),e=Object(l.a)(t,2),n=e[0],a=e[1],c=Object(j.useState)("a new note..."),o=Object(l.a)(c,2),f=o[0],d=o[1],O=Object(j.useState)(!0),h=Object(l.a)(O,2),S=h[0],k=h[1],y=Object(j.useState)(null),N=Object(l.a)(y,2),C=N[0],I=N[1],J=Object(j.useState)(""),D=Object(l.a)(J,2),E=D[0],U=D[1],_=Object(j.useState)(""),z=Object(l.a)(_,2),A=z[0],B=z[1],M=Object(j.useState)(null),T=Object(l.a)(M,2),W=T[0],q=T[1];Object(j.useEffect)((function(){m().then((function(t){a(t)}))}),[]),Object(j.useEffect)((function(){var t=window.sessionStorage.getItem("loggedNoteappUser");if(t){var e=JSON.parse(t);q(e),x(e.token)}}),[]);var F=function(t){t.preventDefault();var e={content:f,data:(new Date).toISOString(),important:Math.random()<.5};v(e).then((function(t){a(n.concat(t)),d("")}))},G=function(t){d(t.target.value)},H=S?n:n.filter((function(t){return!0===t.important})),K=function(){var t=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,w.login({username:E,password:A});case 4:n=t.sent,window.sessionStorage.setItem("loggedNoteappUser",JSON.stringify(n)),x(n.token),q(n),B(""),U(""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),I("Wrong Credentials"),setTimeout((function(){I(null)}),5e3);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{href:"http://localhost:3000",onClick:function(t){window.sessionStorage.removeItem("loggedNoteappUser"),q(null)},children:"log out"}),Object(r.jsx)("h1",{children:"Notes"}),Object(r.jsx)(b,{message:C}),null===W?Object(r.jsxs)("form",{onSubmit:K,children:[Object(r.jsxs)("div",{children:["username",Object(r.jsx)("input",{type:"text",name:"username",value:E,onChange:function(t){var e=t.target;return U(e.value)}})]}),Object(r.jsxs)("div",{children:["password",Object(r.jsx)("input",{type:"password",name:"password",value:A,onChange:function(t){var e=t.target;return B(e.value)}})]}),Object(r.jsx)("button",{type:"submit",children:" login "})]}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[W.name," loged-in"]}),Object(r.jsxs)("form",{onSubmit:F,children:[Object(r.jsx)("input",{value:f,onChange:G}),Object(r.jsx)("button",{type:"submit",children:"save"})]})]}),Object(r.jsxs)("button",{onClick:function(){return k(!S)},children:["show ",S?"important":"all"]}),Object(r.jsx)("ul",{children:H.map((function(t,e){return Object(r.jsx)(p,{note:t,toggleImportance:function(){return function(t){var e=n.find((function(e){return e.id===t})),r=Object(i.a)(Object(i.a)({},e),{},{important:!e.important});g(t,r).then((function(e){console.log("udpated"),a(n.map((function(n){return n.id!==t?n:e})))})).catch((function(t){console.log("error occured",t)}))}(t.id)}},e)}))})]})});c.a.render(Object(r.jsx)(S,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2d6b47ea.chunk.js.map